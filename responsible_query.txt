use alliance;
SELECT
	all_calendar.id AS id,
	all_calendar.id AS url,
CASE 
        WHEN CONCAT(all_calendar.date_from, ' ', all_calendar.time_from) IS NULL THEN all_calendar.time_to
        ELSE CONCAT(all_calendar.date_from, ' ', all_calendar.time_from)
        END AS start,
    CASE
        WHEN CONCAT(all_calendar.date_to, ' ', all_calendar.time_to) IS NULL THEN all_calendar.time_to
        ELSE CONCAT(all_calendar.date_to, ' ', all_calendar.time_to)
        END AS end,
    all_calendar.title AS title,
    CASE all_calendar.status
        WHEN '0' THEN 'red'
        WHEN '1' THEN 'primary'
        ELSE 'green'
        END as color,
    CASE all_calendar.allday
        WHEN '0' THEN 'false'
        ELSE 'true'
        END AS allday 	
FROM
	all_calendar 
LEFT JOIN
	all_calendar_responsibles 
ON 
	all_calendar_responsibles.calendar_id = all_calendar.id
LEFT JOIN 
	all_user 
ON
	all_calendar_responsibles.user_id = all_user.id 
WHERE 
	author = 51 
OR 
	all_calendar_responsibles.user_id LIKE 51
AND 
	all_calendar.private <> 1;




                    SELECT
                        {{%calendar}}.id AS id,
                        {{%calendar}}.id AS url,
                    CASE 
                            WHEN CONCAT({{%calendar}}.date_from, ' ', {{%calendar}}.time_from) IS NULL THEN {{%calendar}}.time_to
                            ELSE CONCAT({{%calendar}}.date_from, ' ', {{%calendar}}.time_from)
                            END AS start,
                        CASE
                            WHEN CONCAT({{%calendar}}.date_to, ' ', {{%calendar}}.time_to) IS NULL THEN {{%calendar}}.time_to
                            ELSE CONCAT({{%calendar}}.date_to, ' ', {{%calendar}}.time_to)
                            END AS end,
                        {{%calendar}}.title AS title,
                        CASE {{%calendar}}.status
                            WHEN '0' THEN 'red'
                            WHEN '1' THEN 'primary'
                            ELSE 'green'
                            END as color,
                        CASE {{%calendar}}.allday
                            WHEN '0' THEN 'false'
                            ELSE 'true'
                            END AS allday   
                    FROM
                        {{%calendar}} 
                    LEFT JOIN
                        {{%calendar_responsibles}} 
                    ON 
                        {{%calendar_responsibles}}.calendar_id = {{%calendar}}.id
                    LEFT JOIN 
                        all_user 
                    ON
                        {{%calendar_responsibles}}.user_id = {{%user}}.id 
                    WHERE 
                        author = 51 
                    OR 
                        {{%calendar_responsibles}}.user_id LIKE 51
                    AND 
                        {{%calendar}}.private <> 1;



"SELECT
                    {{%calendar}}.id AS id,
                    {{%calendar}}.id AS url,
                    CASE 
                        WHEN CONCAT({{%calendar}}.date_from, ' ', {{%calendar}}.time_from) IS NULL THEN {{%calendar}}.time_to
                        ELSE CONCAT({{%calendar}}.date_from, ' ', {{%calendar}}.time_from)
                        END AS start,
                    CASE
                        WHEN CONCAT({{%calendar}}.date_to, ' ', {{%calendar}}.time_to) IS NULL THEN {{%calendar}}.time_to
                        ELSE CONCAT({{%calendar}}.date_to, ' ', {{%calendar}}.time_to)
                        END AS end,
                    {{%calendar}}.title AS title,
                    CASE {{%calendar}}.status
                        WHEN '0' THEN 'red'
                        WHEN '1' THEN 'primary'
                        ELSE 'green'
                        END as color,
                    CASE {{%calendar}}.allday
                        WHEN '0' THEN 'false'
                        ELSE 'true'
                        END AS allday   
                FROM
                    {{%calendar}} 
                LEFT JOIN
                    {{%calendar_responsibles}} 
                ON 
                    {{%calendar_responsibles}}.calendar_id = {{%calendar}}.id
                LEFT JOIN 
                    all_user 
                ON
                    {{%calendar_responsibles}}.user_id = {{%user}}.id 
                WHERE 
                    author = '".Yii::$app->user->getId()."'
                OR 
                    {{%calendar_responsibles}}.user_id LIKE '".Yii::$app->user->getId()."'
                AND 
                    {{%calendar}}.private <> 1;";